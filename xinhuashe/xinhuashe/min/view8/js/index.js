function chartTop(a){function t(a,t,e){e=e||{};var i,n=e.time,l=e.num,r=16*l/(1e3*n),d=0,o=0,c=!(e.num-parseInt(e.num)==0),i=setInterval(function(){(d+=r)>=l&&(clearInterval(i),i=void 0,d=l);var n=c?d:Math.floor(d);n!=o&&(o=n,a.text=o,t.x=176+455*e.index+a.width)},16)}var e=$(".chart-top"),i=new PIXI.Application(e.width(),e.height());$(i.view).appendTo(e);for(var n=[{data:a.totalCount,unit:"次",desc:"被调用",color:47609},{data:a.successCount,unit:"次",desc:"成功",color:45457},{data:a.present,unit:"%",desc:"成功率",color:15646464},{data:a.useTime,unit:"s",desc:"即使服务时间",color:14243585}],l=0;l<4;l++)!function(a,e){var n=new PIXI.Graphics;n.beginFill(1249574),n.drawRect(455*a,0,435,250),n.endFill(),i.stage.addChild(n);var l=new PIXI.Graphics;l.beginFill(e.color),l.drawRect(40+455*a,192,358,8),l.endFill(),i.stage.addChild(l);var r=new PIXI.Text(e.desc,{fontSize:20,fill:e.color});r.x=176+455*a,r.y=136,i.stage.addChild(r);var d=new PIXI.Text(0,{fontSize:50,fill:"#fff"});d.x=176+455*a,d.y=60,i.stage.addChild(d);var o=new PIXI.Text(e.unit,{fontSize:25,fill:"#fff"});o.x=176+455*a+d.width,o.y=80,i.stage.addChild(o),t(d,o,{time:1,num:e.data,index:a})}(l,n[l]);for(var r=["/apps/view8/imgs/file.jpg","/apps/view8/imgs/success.jpg","/apps/view8/imgs/chart.jpg","/apps/view8/imgs/time.jpg"],l=0;l<4;l++)!function(a){var t=PIXI.Sprite.fromImage(r[a]);t.x=50+454*a,t.y=a%2?50:30,i.stage.addChild(t)}(l)}function chartBottom(a){function t(a,t,e,n,l){var r=new PIXI.Text(e,{fill:l,fontSize:18});r.x=65+247*t,r.y=133+163*a,i.stage.addChild(r);var n=new PIXI.Text(n,{fill:"#fff",fontSize:36});n.x=65+247*t,n.y=173+163*a,i.stage.addChild(n);var d=new PIXI.Text("次",{fill:"#fff",fontSize:20});d.x=70+n.width+247*t,d.y=185+163*a,i.stage.addChild(d)}var e=$(".chart-bottom"),i=new PIXI.Application(e.width(),e.height(),{backgroundColor:1249574});$(i.view).appendTo(e);var n=[],l=new PIXI.Graphics;l.beginFill(1249574),l.drawRect(0,0,e.width(),e.height()),l.interactive=!0,l.on("pointertap",function(){d.alpha=0;for(var a=0;a<n.length;a++)n[a].alpha=0}),i.stage.addChild(l);for(var r=0;r<7;r++)!function(a,t){var e=new PIXI.Graphics;e.interactive=!0,e.beginFill(2039344),e.drawRect(40+247*a,42,235,535),e.endFill(),function(a){e.on("pointertap",function(t){d.alpha=1,n[o].alpha=a==o?1:0,console.log(o,a),c=247*o,clearInterval(e);var e=setInterval(function(){a<o&&(c-=8)<=247*a&&(o=a,d.x=247*a,n[a].alpha=1,clearInterval(e)),a>=o&&(o!=a&&(c+=8),c>=247*a&&(o=a,n[a].alpha=1,clearInterval(e))),d.x=c},1)})}(a),i.stage.addChild(e)}(r,a[r]);var d=new PIXI.Graphics;d.beginFill(2828860),d.drawRect(40,0,235,625),d.alpha=0,i.stage.addChild(d);for(var r=0;r<7;r++)!function(t){var e=new PIXI.Graphics;e.beginFill(a[t].color,1),e.drawRect(40+247*t,619,235,6),e.endFill(),e.alpha=0,i.stage.addChild(e),n.push(e)}(r);for(var r=0;r<7;r++)!function(a,e){var n=new PIXI.Graphics;n.beginFill(e.color),n.drawRect(58+247*a,55,5,28),n.endFill(),i.stage.addChild(n);var l=new PIXI.Text(e.title,{fill:"#fff",fontSize:20});l.x=73+247*a,l.y=55,i.stage.addChild(l);for(var r=a,a=0;a<e.types.length;a++)t(a,r,e.types[a].name,e.types[a].data,e.color)}(r,a[r]);var o=0,c=0}$.get(Config.api.api1,function(a){if(200==a.code){for(var t=[],e=[113145,45457,3846400,15646464,15436544,14178305,15218984],i=0;i<a.data.length;i++){for(var n=[],l=0;l<a.data[i].apiList.length;l++)n.push({name:a.data[i].apiList[l].api_name,data:a.data[i].apiList[l].access_count});t.push({title:a.data[i].app_name,color:e[i],types:n})}chartBottom(t)}}),$.get(Config.api.api2,function(a){200==a.code&&chartTop(a.data[0])});