function chartTop(a){var i=$(".chart-top"),t=new PIXI.Application(i.width(),i.height());$(t.view).appendTo(i);for(var e=[{data:a.totalCount,unit:"次",desc:"被调用",color:47609},{data:a.successCount,unit:"次",desc:"成功",color:45457},{data:a.present,unit:"%",desc:"成功率",color:15646464},{data:a.useTime,unit:"s",desc:"即使服务时间",color:14243585}],l=0;l<4;l++)!function(a,i){var e=new PIXI.Graphics;e.beginFill(1249574),e.drawRect(455*a,0,435,250),e.endFill(),t.stage.addChild(e);var l=new PIXI.Graphics;l.beginFill(i.color),l.drawRect(40+455*a,192,358,8),l.endFill(),t.stage.addChild(l);var n=new PIXI.Text(i.desc,{fontSize:20,fill:i.color});n.x=176+455*a,n.y=136,t.stage.addChild(n);var d=new PIXI.Text(i.data,{fontSize:50,fill:"#fff"});d.x=176+455*a,d.y=60,t.stage.addChild(d);var o=new PIXI.Text(i.unit,{fontSize:25,fill:"#fff"});o.x=176+455*a+d.width,o.y=80,t.stage.addChild(o)}(l,e[l]);for(var n=["/imgs/file.jpg","/imgs/success.jpg","/imgs/chart.jpg","/imgs/time.jpg"],l=0;l<4;l++)!function(a){var i=PIXI.Sprite.fromImage(n[a]);i.x=50+454*a,i.y=a%2?50:30,t.stage.addChild(i)}(l)}function chartBottom(a){function i(a,i,t,l,n){var d=new PIXI.Text(t,{fill:n,fontSize:18});d.x=65+247*i,d.y=133+163*a,e.stage.addChild(d);var l=new PIXI.Text(l,{fill:"#fff",fontSize:36});l.x=65+247*i,l.y=173+163*a,e.stage.addChild(l);var o=new PIXI.Text("次",{fill:"#fff",fontSize:20});o.x=70+l.width+247*i,o.y=185+163*a,e.stage.addChild(o)}var t=$(".chart-bottom"),e=new PIXI.Application(t.width(),t.height(),{backgroundColor:1249574});$(e.view).appendTo(t);for(var l=0;l<7;l++)!function(a,t){var l=new PIXI.Graphics,r=new PIXI.Graphics;l.interactive=!0,l.beginFill(2039344),l.drawRect(40+247*a,42,235,535),l.endFill(),l.beginFill(t.color),l.drawRect(58+247*a,55,5,28),l.endFill(),function(a){l.on("pointertap",function(i){console.log(i.data.originalEvent.which),d=0,r.x=0,o=0,n.graphics?(n.graphics.clear(),r.beginFill(2828860,1),r.drawRect(40+247*a,0,235,625),r.endFill(),r.beginFill(t.color),r.drawRect(40+247*a,619,235,6),r.endFill(),r.beginFill(t.color),r.drawRect(58+247*a,55,5,28),r.endFill()):(r.beginFill(2828860,1),r.drawRect(40+247*a,0,235,625),r.endFill(),r.beginFill(t.color),r.drawRect(40+247*a,619,235,6),r.endFill(),r.beginFill(t.color),r.drawRect(58+247*a,55,5,28),r.endFill()),n.graphics=r,n.index=a})}(a),e.stage.addChild(l),e.stage.addChild(r);var c=new PIXI.Text(t.title,{fill:"#fff",fontSize:20});c.x=73+247*a,c.y=55,e.stage.addChild(c);for(var f=a,a=0;a<t.types.length;a++)i(a,f,t.types[a].name,t.types[a].data,t.color)}(l,a[l]);var n={},d=0,o=0}$.get(Config.api.api1,function(a){if(200==a.code){for(var i=[],t=[113145,45457,3846400,15646464,15436544,14178305,15218984],e=0;e<a.data.length;e++){for(var l=[],n=0;n<a.data[e].apiList.length;n++)l.push({name:a.data[e].apiList[n].api_name,data:a.data[e].apiList[n].access_count});i.push({title:a.data[e].app_name,color:t[e],types:l})}chartBottom(i)}}),$.get(Config.api.api2,function(a){200==a.code&&chartTop(a.data[0])});